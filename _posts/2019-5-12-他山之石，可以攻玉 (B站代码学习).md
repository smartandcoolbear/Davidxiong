---
title: 他山之石，可以攻玉 (B站代码学习)
layout: post
tags:
  - Golang, bilibili
---


由于众所周知的一些原因，B站代码迫不得已"被开源"了。最近在看B站代码的过程中，也将一些学习心得记录下来。
由于相关的技术点还是比较多的，因此准备分成一个系列来讲，整体提纲如下：
 1. B站代码结构学习
 2. B站典型的中间件/框架学习
 3. B站整体的技术栈分析。
 
今天先讲第一部分：B站代码结构学习。


相关链接：

1.[一探B站后台架构](https://studygolang.com/articles/19995#reply0)


# B站代码结构学习



在C++的发展历程中，“函数”其实一直以来都不是一等公民，即使随着C++不断的完善改进，函数越来越像一个普通变量，但由于历史原因，人们在C++中还是无法很顺畅的像使用一个普通对象一样使用函数。

举例来说，一开始C++中对对象的认识是变量、参量、指针等，因此我们最为常见的函数传参是这样：

    void function(float* x, unsigned n) {
    },
    
其传入的参数基本都是各种变量类型。

然而，随着技术的不断发展，将函数作为参数传入的需求越来越多。因此C++中慢慢延伸出这样的用法：

    int fun1(int i){ 
        return   i; 
    } 
    void fun2(int j, int (*p)(int)){ 
        cout << p(j); 
    } 
    void main() { 
        int   i=1; 
        fun2(i,fun1); 
    } 
    








